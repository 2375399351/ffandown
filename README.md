# <p align="center" style="display: flex;justify-content: center;"><img style="margin-right: 20px; width: 40px;" src="https://pic.kblue.site/picgo/ffandown.svg"/> FFandown</p>

<p align="center">ffandown是一个m3u8视频下载器，基于ffmpeg实现视频的下载。
<p align="center">ffandown is a m3u8 video downloader,that base on ffmpeg</p>
<p align="center">
    <a href="https://hub.docker.com/r/h55205l/ffandown">
        <img alt="docker image size" src="https://img.shields.io/docker/image-size/h55205l/ffandown"/>
    </a>
    <a href="https://hub.docker.com/r/h55205l/ffandown">
        <img alt="docker pulls" src="https://img.shields.io/docker/pulls/h55205l/ffandown?style=social"/>
    </a>
    <a href="https://github.com/helson-lin/ffandown">
          <img alt="release downloads" src="https://img.shields.io/github/downloads/helson-lin/ffandown/total?color=brightgreen&label=release%20download"/>
    </a>
    <a href="https://github.com/helson-lin/ffandown">
        <img alt="docker image size" src="https://img.shields.io/badge/platform-macos%7Clinux%7Cwin-brightgreen"/>
    </a>
     <a href="https://github.com/helson-lin/ffandown">
        <img alt="docker image size" src="https://img.shields.io/github/last-commit/helson-lin/ffandown"/>
    </a>
    <a href="/README-en.md">
        <img alt="lang" src="https://img.shields.io/badge/Lang-EN-brightgreen" />
    </a>
     <a href="https://qm.qq.com/q/7EtNRkt2eI">
        <img alt="qq" src="https://img.shields.io/badge/QQ%E7%BE%A4-953172983-%234f4f4f?logo=data:image/png;base64,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&color=#4f4f4f" />
    </a>
        <a href="https://github.com/helson-lin/ffandown">
        <img alt="issues" src="https://img.shields.io/github/issues/helson-lin/ffandown" />
    </a>
</p>

## 使用说明

1. ✨ 目前支持 m3u8、rtsp、rtmp 直播下载和 m3u8、mp4、flv、视频下载
2. ✨ 支持下载消息通知（bark、飞书、钉钉、gotify）
3. ✨ 支持自定义下载转码格式（mp4、mov、flv、avi）
4. ✨ 支持自定义请求头
5. ✨ 全平台支持
6. ✨ 支持插件系统（v5.0.0 正式版本）
7. ✨ 支持代理配置
   

[详细使用文档地址和更新计划安排](https://ffandown.oimi.space/)

## 项目运行

1. 依赖安装：`npm install` 
2. 运行服务: `npm run dev`


## 项目打包

### PKG打包

终端运行 `npm run pkg`


### Release说明

release平台可执行文件，打包仅打包了常用平台，其他平台架构请使用docker或自行打包


### Docker安装

shell:  `docker run -d -p 8081:8081 -v /home/media:/app/media  -v /Uses/helson/config:/app/config -v /Uses/helson/logs:/app/logs h55205l/ffandown:v5.1.0-Beta`

`/app/media`为下载媒体的目录、默认8081端口

`/app/config`为配置文件目录

`/app/logs`为日志文件目录

`/app/public`为前端静态文件目录


## 使用

服务启动之后，可以看到`server runing on port: 8081`的字样
直接在浏览器打开`localhost:8081`就可以看到下载页面

![example](./example.png)

### Api创建下载任务

[API 文档](https://apifox.com/apidoc/shared-d00c4b27-4841-4ecd-932c-b04bdc3b94cd)

- 接口地址：`http://localhost:8081/down`
- 请求方式：`post`
- 请求头： `Content-Type`: `application/json`
- 参数: 
    ```js
    {
        name: "videoname",
        url: "http://playertest.longtailvideo.com/adaptive/bipbop/gear4/prog_index.m3u8",
        audioUrl: '', // 音频地址（音频地址用于合并音视频文件）
        outputformat: "mp4",
        preset: "medium",
        dir: "/videos", // 保存目录
        headers: [
            {
                key: 'User-Agent',
                value: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'
            }
        ]
    }
    ```


### 配置ios快捷指令使用

[快捷指令下载地址✈️](https://www.icloud.com/shortcuts/d839d5fab95c48e0ab59e72396ec8280)

使用前记得先编辑指令，修改服务器的地址IP和端口

## 免责声明

使用本项目所产生的所有风险由用户自行承担。我们不对因使用本项目而导致的任何直接、间接、偶然、特殊或后果性的损害负责，包括但不限于利润损失、数据丢失或其他经济损失。 责任限制：在适用法律允许的最大范围内，项目作者及贡献者对因使用或无法使用本项目而导致的任何损失不承担责任。

## License

此项目采用创作共用署名-非商业性使用4.0国际公共许可证进行许可。详情请查阅LICENSE文件。

## 致谢

- [FFmpeg](https://ffmpeg.org/)
- [node-fluent-ffmpeg](https://github.com/fluent-ffmpeg/node-fluent-ffmpeg)
  

## 捐助和支持

感谢**Gentle**、**鑫仔** 捐助支持、感谢**jk9527**技术贡献、

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=helson-lin/ffandown&type=Date)](https://star-history.com/#helson-lin/ffandown&Date)
